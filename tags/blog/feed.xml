<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Blog on Real Beat</title>
    <link>http://nobu666.com/tags/blog.html</link>
    <description>Recent content in Blog on Real Beat</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja-JP</language>
    <copyright>&amp;copy; nobu666.com</copyright>
    <lastBuildDate>Tue, 29 Dec 2015 02:30:40 +0900</lastBuildDate>
    <atom:link href="http://nobu666.com/tags/blog/feed.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>WerckerやめてCircleCIに移行</title>
      <link>http://nobu666.com/2015/12/31/1022.html</link>
      <pubDate>Tue, 29 Dec 2015 02:30:40 +0900</pubDate>
      
      <guid>http://nobu666.com/2015/12/31/1022.html</guid>
      <description>

&lt;h2 id=&#34;wercker-から-circleci-へ:60091336f7408d77f4ebbe4dfdae639e&#34;&gt;Wercker から CircleCI へ&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;http://nobu666.com/2015/06/21/1015.html&#34;&gt;WordPressからGitHub Pages + hugoに移行した&lt;/a&gt; で書いたとおり GitHub と Hugo で Blog 書くことにしたものの、Wercker の UI がなんか微妙だったのと、仕事で CircleCI 使ってるのでいっその事移行することにした。&lt;/p&gt;

&lt;h2 id=&#34;circle-yml:60091336f7408d77f4ebbe4dfdae639e&#34;&gt;circle.yml&lt;/h2&gt;

&lt;p&gt;こんな感じに&lt;/p&gt;
&lt;div class=&#34;highlight&#34; style=&#34;background: #272822&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;machine:&lt;/span&gt;
  &lt;span style=&#34;color: #f8f8f2&#34;&gt;timezone:&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;Asia&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;Tokyo&lt;/span&gt;

&lt;span style=&#34;color: #f8f8f2&#34;&gt;checkout:&lt;/span&gt;
  &lt;span style=&#34;color: #f8f8f2&#34;&gt;post:&lt;/span&gt;
    &lt;span style=&#34;color: #f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;git&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;submodule&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;update&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;--&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;init&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;--&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;recursive&lt;/span&gt;

&lt;span style=&#34;color: #f8f8f2&#34;&gt;dependencies:&lt;/span&gt;
  &lt;span style=&#34;color: #f8f8f2&#34;&gt;pre:&lt;/span&gt;
    &lt;span style=&#34;color: #f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;get&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;v&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;github.com&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;spf13&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;hugo&lt;/span&gt;
    &lt;span style=&#34;color: #f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;git&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;config&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;--&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;global&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;user.name&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;nobu666&amp;quot;&lt;/span&gt;
    &lt;span style=&#34;color: #f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;git&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;config&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;--&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;global&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;user.email&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;ogata.nobu@gmail.com&amp;quot;&lt;/span&gt;

&lt;span style=&#34;color: #f8f8f2&#34;&gt;test:&lt;/span&gt;
  &lt;span style=&#34;color: #f8f8f2&#34;&gt;override:&lt;/span&gt;
   &lt;span style=&#34;color: #f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;echo&lt;/span&gt;

&lt;span style=&#34;color: #f8f8f2&#34;&gt;deployment:&lt;/span&gt;
  &lt;span style=&#34;color: #f8f8f2&#34;&gt;master:&lt;/span&gt;
    &lt;span style=&#34;color: #f8f8f2&#34;&gt;branch:&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;master&lt;/span&gt;
    &lt;span style=&#34;color: #f8f8f2&#34;&gt;commands:&lt;/span&gt;
      &lt;span style=&#34;color: #f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;git&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;clone&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;git@github.com:nobu666&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;nobu666.github.io.git&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;public&lt;/span&gt;
      &lt;span style=&#34;color: #f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;hugo&lt;/span&gt;
      &lt;span style=&#34;color: #f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;cd&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;git&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;add&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;.&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;git&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;commit&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;m&lt;/span&gt; &lt;span style=&#34;color: #e6db74&#34;&gt;&amp;quot;[ci skip] publish&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;;&lt;/span&gt; &lt;span style=&#34;color: #66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;[&lt;/span&gt; &lt;span style=&#34;color: #960050; background-color: #1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color: #f92672&#34;&gt;?&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;eq&lt;/span&gt; &lt;span style=&#34;color: #ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;];&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;then&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;git&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;push&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;origin&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;master;&lt;/span&gt; &lt;span style=&#34;color: #66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color: #f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color: #f8f8f2&#34;&gt;;&lt;/span&gt; &lt;span style=&#34;color: #f8f8f2&#34;&gt;fi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;test 部分はなんか書いとかないと warning が出てしまうので適当に。deployment のとこは、 README だけ変えたいときとかに &lt;code&gt;git commit&lt;/code&gt; が空振りしたエラーになるのを避けるため条件分岐している。&lt;/p&gt;

&lt;h2 id=&#34;circleci-側の設定:60091336f7408d77f4ebbe4dfdae639e&#34;&gt;CircleCI 側の設定&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;CircleCI の Project Settings で設定画面を開く&lt;/li&gt;
&lt;li&gt;Permissons にある Checkout SSH keys を開く&lt;/li&gt;
&lt;li&gt;GitHub の Authorize をする&lt;/li&gt;
&lt;li&gt;Create and add 的なボタンがあるのでそれをポチる&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;リポジトリは2つ使っていて、ソースに nobu666/nobu666.com 、公開用に nobu666/nobu666.github.io を使っている。branch で分ければ1つでもできると思うが、非公開にする必要ないし、2つ作ってしまっていいと思う。&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>