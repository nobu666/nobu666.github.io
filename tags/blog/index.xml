<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Blog on Real Beat</title>
    <link>http://nobu666.com/tags/blog.html</link>
    <description>Recent content in Blog on Real Beat</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja-JP</language>
    <copyright>&amp;copy; nobu666.com</copyright>
    <lastBuildDate>Tue, 29 Dec 2015 02:30:40 +0900</lastBuildDate>
    <atom:link href="http://nobu666.com/tags/blog.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>WerckerやめてCircleCIに移行</title>
      <link>http://nobu666.com/2015/12/31/1022.html</link>
      <pubDate>Tue, 29 Dec 2015 02:30:40 +0900</pubDate>
      
      <guid>http://nobu666.com/2015/12/31/1022.html</guid>
      <description>

&lt;h2 id=&#34;wercker-から-circleci-へ:60091336f7408d77f4ebbe4dfdae639e&#34;&gt;Wercker から CircleCI へ&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;http://nobu666.com/2015/06/21/1015.html&#34;&gt;WordPressからGitHub Pages + hugoに移行した&lt;/a&gt; で書いたとおり GitHub と Hugo で Blog 書くことにしたものの、Wercker の UI がなんか微妙だったのと、仕事で CircleCI 使ってるのでいっその事移行することにした。&lt;/p&gt;

&lt;h2 id=&#34;circle-yml:60091336f7408d77f4ebbe4dfdae639e&#34;&gt;circle.yml&lt;/h2&gt;

&lt;p&gt;こんな感じに&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;machine:
  timezone: Asia/Tokyo

checkout:
  post:
    - git submodule update --init --recursive

dependencies:
  pre:
    - go get -v github.com/spf13/hugo
    - git config --global user.name &amp;quot;nobu666&amp;quot;
    - git config --global user.email &amp;quot;ogata.nobu@gmail.com&amp;quot;

test:
  override:
   - echo

deployment:
  master:
    branch: master
    commands:
      - git clone git@github.com:nobu666/nobu666.github.io.git public
      - hugo
      - cd public &amp;amp;&amp;amp; git add . &amp;amp;&amp;amp; git commit -m &amp;quot;[ci skip] publish&amp;quot;; if [ $? -eq 0 ]; then git push origin master; else :; fi
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;test 部分はなんか書いとかないと warning が出てしまうので適当に。deployment のとこは、 README だけ変えたいときとかに &lt;code&gt;git commit&lt;/code&gt; が空振りしたエラーになるのを避けるため条件分岐している。&lt;/p&gt;

&lt;h2 id=&#34;circleci-側の設定:60091336f7408d77f4ebbe4dfdae639e&#34;&gt;CircleCI 側の設定&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;CircleCI の Project Settings で設定画面を開く&lt;/li&gt;
&lt;li&gt;Permissons にある Checkout SSH keys を開く&lt;/li&gt;
&lt;li&gt;GitHub の Authorize をする&lt;/li&gt;
&lt;li&gt;Create and add 的なボタンがあるのでそれをポチる&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;リポジトリは2つ使っていて、ソースに nobu666/nobu666.com 、公開用に nobu666/nobu666.github.io を使っている。branch で分ければ1つでもできると思うが、非公開にする必要ないし、2つ作ってしまっていいと思う。&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>