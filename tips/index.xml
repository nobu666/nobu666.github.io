<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Tips on Real Beat</title>
    <link>http://localhost:1313/tags/tips.html</link>
    <description>Recent content in Tips on Real Beat</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja-JP</language>
    <copyright>&amp;copy; nobu666.com</copyright>
    <lastBuildDate>Fri, 26 Jun 2015 20:46:09 +0900</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/tips.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Mac OS XでパスワードやトークンをKeychain管理にしてスクリプトから使う方法</title>
      <link>http://localhost:1313/2015/06/26/1016.html</link>
      <pubDate>Fri, 26 Jun 2015 20:46:09 +0900</pubDate>
      
      <guid>http://localhost:1313/2015/06/26/1016.html</guid>
      <description>

&lt;p&gt;例えば &lt;code&gt;.zshrc&lt;/code&gt; とかに &lt;code&gt;HOMEBREW_GITHUB_API_TOKEN&lt;/code&gt; をexportしてるけど、このファイルを人に見せることになると困る。回避方法としては &lt;code&gt;~/.github_token&lt;/code&gt; を別途作ってそっちに値を書き込んで置いて&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;if [ -f ~/.github_token ]; then
  . ~/.github_token
fi
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;こんなふうにするという解決策もあるにはある。が、もうちょっとセキュアかつ簡単な方法はないものか、ということで以下のようにすると捗った&lt;/p&gt;

&lt;h2 id=&#34;keychainに値を登録する:e1867217de400bc30fb87cf008200204&#34;&gt;Keychainに値を登録する&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;security add-generic-password -a homebrew-github-api-key -s homebrew-github-api-key -w XXXXXXXXXXXXXXX
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;keychainから値をとりだす:e1867217de400bc30fb87cf008200204&#34;&gt;Keychainから値をとりだす&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;security find-generic-password -ga homebrew-github-api-key
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;このままだと余計な情報もたくさん取れてきてしまうので、必要な部分だけ抜き出すようにする&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;security find-generic-password -ga homebrew-github-api-key 2&amp;gt;&amp;amp;1 &amp;gt;/dev/null | ruby -e &#39;print $1 if STDIN.gets =~ /^password: &amp;quot;(.*)&amp;quot;$/&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;これでファイルに直接書かないでよくなったので、.zshrcとかでexportするときも &lt;code&gt;$(security ...)&lt;/code&gt; をexportしてやればいい。うむ。&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>