<!DOCTYPE html>
<html lang="ja-JP">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
  <meta property="og:title" content=" Real Beat" />
  
  <meta property="og:site_name" content="Real Beat" />
  <meta property="og:url" content="http://nobu666.com/" />
  
  
  <meta property="og:type" content="website" />
  

  <title>
     Real Beat
  </title>

  <link rel="stylesheet" href="http://nobu666.com/css/bootstrap.min.css" />
  <link rel="stylesheet" href="http://nobu666.com/css/main.css" />
  <link rel="stylesheet" href="http://nobu666.com/css/font-awesome.min.css" />
  <link rel="stylesheet" href="http://nobu666.com/css/github.css" />
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400" type="text/css">
  <link rel="shortcut icon" href="http://nobu666.com/images/favicon.ico" />
  <link rel="apple-touch-icon" href="http://nobu666.com/images/apple-touch-icon.png" />
  
  <link href="http://nobu666.com/.xml" rel="alternate" type="application/rss+xml" title="Real Beat" />
  
</head>
<body>
    <header class="global-header"  style="background-image:url( /images/bg.jpg )">
    <section class="header-text">
      <h1><a href="http://nobu666.com/">Real Beat</a></h1>
      
      <div class="sns-links hidden-print">
  
  <a href="ogata.nobu@gmail.com">
    <i class="fa fa-envelope"></i>
  </a>
  
  
  <a href="https://twitter.com/nobu666" target="_blank">
    <i class="fa fa-twitter"></i>
  </a>
  
  
  
  
  <a href="https://facebook.com/nobutoshi.ogata" target="_blank">
    <i class="fa fa-facebook"></i>
  </a>
  
  
  <a href="https://github.com/nobu666" target="_blank">
    <i class="fa fa-github"></i>
  </a>
  
  
  
  <a href="https://linkedin.com/in/nobu666" target="_blank">
    <i class="fa fa-linkedin"></i>
  </a>
  
  
</div>

      
      
      <a href="http://nobu666.com/.xml" class="btn-header btn-subscribe hidden-xs">
        <i class="fa fa-rss" aria-hidden="true"></i>
        &nbsp;Subscribe
      </a>
      
    </section>
  </header>
  <main class="container">

<div class="article-list">
  
  
  <article>
  <header>
    <h2><a href="http://nobu666.com/2006/10/25/420.html">[memo] postfix &#43; dovecotでSMTP AUTH &amp; IMAPなメールサーバを立ち上げる</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2006-10-25T23:59:30&#43;09:00">
          Oct 25, 2006
        </time>
      </div>
    </div>
  </header>
  <div>
    2006/10/29追記: イマイチ不正確なので[修正版][memo] postfix + dovecotでSMTP AUTH &amp; IMAPなメールサーバを立ち上げるで書き直しました。そちらをみてください。
  </div>
  
</article>

  
  
  <hr/>
  
  <article>
  <header>
    <h2><a href="http://nobu666.com/2006/10/24/418.html">[memo] サーバのCPU動作周波数を動的に変える</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2006-10-24T15:50:23&#43;09:00">
          Oct 24, 2006
        </time>
      </div>
    </div>
  </header>
  <div>
    [memo] サーバのCPU動作周波数を下げるの続き。 やってみないとわからんので、cpufreq_ondemandを試してみる。 modprobe cpufreq_ondemand echo ondemand &gt; /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor cd /sys/devices/system/cpu/cpu0/cpufreq/ondemand/ ls ignore_nice_load sampling_down_factor sampling_rate sampling_rate_max sampling_rate_min up_threshold cat ignore_nice_load 0 cat sampling_down_factor 1 cat sampling_rate 1040000 cat sampling_rate_max 520000000 cat sampling_rate_min 520000 cat up_threshold 80 詳細はKernel メモ ondemand参照。とりあえずignore_nice_loadは1に設定しておいた。急がないけど負荷になりそうな作業なんかはniceすること。 実際にemerge &ndash;syncとかして/proc/cpuinfoを見てたら、普段1GHzで動作しているのが2GHz→1.8GHzとなって1GHzに戻った。上手く動いているっぽい。試しにnice revdep-rebuildとかすると1GHzから変わらないことも確認。とりあえずこのまま運用してみる。
  </div>
  
</article>

  
  
  <hr/>
  
  <article>
  <header>
    <h2><a href="http://nobu666.com/2006/10/24/417.html">[memo] TortoiseSVNからsvn&#43;sshを使う</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2006-10-24T15:36:27&#43;09:00">
          Oct 24, 2006
        </time>
      </div>
    </div>
  </header>
  <div>
    普通にsshで繋がるようになったらsvn+sshを使いたくなる。サーバー側はemerge subversionするぐらいで設定は特にない。svnadmin create /var/svn/hoge とか svn import ~/moge file:///var/svn/hogeとかしておくだけ。svnserveを立ち上げる必要はない。svn+sshで接続するときは、sshで認証した後svnserve -tを勝手にしてくれ、接続を切るとsvnserveプロセスもなくなってくれる。よってルータで3690番のポートを開けておくとかいう作業は必要ない。22番だけ開いていればいい。 クライアント側は、Poderosaで作った鍵(例えばファイル名をid_rsaとする)しかない場合はPuTTY用の鍵を作る。puttygenを起動して、秘密鍵を読み込んでパスフレーズを入力すれば変換される。変換された秘密鍵をid_rsa.ppkとして保存。とりあえずPuTTYを起動して接続-データで自動ログインのユーザ名と、接続-SSH-認証で認証のためのプライベートキーファイルでさっきの.ppkファイルを設定。接続してみてパスフレーズ入力してログイン出来ればOK。 次にputty.exeと同じフォルダにあるpageant.exeを起動する。タスクトレイに常駐するので右クリックして鍵の追加を選んで、.ppkを選択する。パスフレーズを入力すれば作業終わり。以降、PuTTYでもTortoiseSVNでもパスフレーズは入力しないでもいい。ただ、これはWindowsにログインしなおすと消えてしまうので、ログイン毎に鍵の追加→パスフレーズの入力を行う必要がある。ランチャーに登録するかスタートアップに入れておく。 後はTortoiseSVNの設定で、ネットワークにあるSSHクライアントにTortoisePlink.exeを設定。これでTortoiseSVNからリボジトリブラウザを開いて、URL欄に svn+ssh://ユーザ名@ホスト名/var/svn/hoge と入力してエラーが出なければ終了。
  </div>
  
</article>

  
  
  <hr/>
  
  <article>
  <header>
    <h2><a href="http://nobu666.com/2006/10/24/416.html">[memo] USEフラグをいい感じに管理する</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2006-10-24T02:40:03&#43;09:00">
          Oct 24, 2006
        </time>
      </div>
    </div>
  </header>
  <div>
    俺のようにしょっちゅうemergeしたい人はUSEフラグの管理が大変だ。知らないうちに勝手にgtk2フラグが有効になっててXがインストールされたりして大変ウザイ。そんなわけでGentoo使いの先輩に教えて貰ったeixとeuseを使ってみる。 sudo emerge eix sudo eix-sync euseはgentoolkitに入っている。eixはemerge &ndash;searchと似たようなモンだがこっちのほうが速いし使いやすい。んで、本題のeuseだが、使い方自体は&ndash;helpすりゃわかるんだが。フラグの説明見たり、どれが使われてるか見れたり、フラグを有効にしたり無効にしたりできる。つーか詳細はman euseで（ｗ euse使うとmake.confのUSEフラグの部分が整形されて見やすくなるのも嬉しい。まぁ説明見るだけなら /usr/portage/profiles/use.desc 見ればいいんだが。 同じくgentoolkitに含まれているequeryも激しく便利。こいつで equery depends mysql とかやってやればmysqlフラグに依存しているパッケージを調べることが出来るし、dependsをdepgraphに変えてやると依存関係をツリーで見れる。超便利。
  </div>
  
</article>

  
  
  <hr/>
  
  <article>
  <header>
    <h2><a href="http://nobu666.com/2006/10/23/415.html">[memo] サーバのCPU動作周波数を下げる</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2006-10-23T23:59:04&#43;09:00">
          Oct 23, 2006
        </time>
      </div>
    </div>
  </header>
  <div>
    CPUに関する情報は/sys/devices/system/cpu/cpu0/cpufreq/で次のファイルをcatする。まぁファイル名のまんまだが。 affected_cpus : 影響する他のCPU。俺の場合はデュアルコアなので当然0と1 cpuinfo_cur_freq : 現在の動作周波数 cpuinfo_max_freq : 最大周波数。AMD64X2 3800+の場合は2000000 cpuinfo_min_freq : 最低周波数。AMD64X2 3800+の場合は1000000 scaling_available_freqyencies : 設定可能な周波数。AMD64X2 3800+の場合は2000000/1800000/1000000しかない。intelだともっと多いらしい scaling_available_governors : 設定可能な動作モード。Gentooのデフォルトではperformanceのみ scaling_cur_freq : 現在の動作周波数 scaling_driver : 周波数コントロールのための仕組みの名前 scaling_governor : 動作モード。scaling_available_governorsのどれか scaling_max_freq : cpuinfo_max_freqと何が違うのかわからん scaling_min_freq : cpuinfo_min_freqと何が違うのかわからん 普段は高周波数で動いてくれなくていいというか、その方が電気代が安くなって地球に優しいためいい感じ。そんなわけで以下の手順を踏んで周波数を下げてみた。 (今の周波数を確認) cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_cur_freq (どんなdriverがあるか探す) find /lib/modules/2.6.17-gentoo-r7/ -name '*.ko'|grep cpu (明らかにそれっぽい奴を見つけたので読み込む) sudo modprobe cpufreq_powersave (動作モードが増えたことを確認) cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_available_governors (動作モードを上で確認したやつに変更) su - ; echo &quot;powersave&quot; &gt; /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor exit (周波数が下がったことを確認) cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_cur_freq これだと確かに周波数は下がるが下がりっぱなしだ。Gentooだと最新を追っかけたい人はコンパイルをしょっちゅうするので、そういうときにいちいち戻すのが面倒だ。そこでcpufreq_ondeamndというdriverを使うと、なんかいい感じに自動化できそうな予感がする。が、もうちょっと調べて、しっかり設定しないと下がりっぱなしとか上がりっぱなしになりそうな予感がするのでとりあえずスルー。
  </div>
  
</article>

  
  
  <hr/>
  
  <article>
  <header>
    <h2><a href="http://nobu666.com/2006/10/22/414.html">掃除ずくし</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2006-10-22T20:26:33&#43;09:00">
          Oct 22, 2006
        </time>
      </div>
    </div>
  </header>
  <div>
    新しい机と本棚のおかげで床の上にものが殆どなくなった。やはり整理されていると気持ちがいいので、最近の週末は掃除ばかりしている。とりあえず部屋の整理・掃除は殆ど終わったので、今週はキッチンと風呂場に手を付けた。ていうか要はサーバのインストール中なので、コンパイルの待ち時間に掃除しようってだけのことだ。キッチンは特に汚れが酷く、吹きこぼれて焦げがびっしりついてたりする。 とりあえずコンロを出来るだけバラして熱湯につける。しばらく置いてからクレンザー付けて焦げ取り用のスポンジで擦ったら、そこそこ綺麗になった。全部の焦げは取れなかったが…まぁヨシとしよう。一番酷いのは換気扇の金属フィルター。ここに住んで5年以上経っているが、実はココは一度も掃除したことがないという禁断の地なのだ。ホコリが詰まってるなーとは思っていたのだが、はずしてみるとそれはただのホコリではなく5年分の油が染み込んだホコリだということが判明……すげーヌルヌルで気持ち悪い。やっぱり熱湯につけて放置し、油汚れ用の洗剤をざぶざぶかけてまた放置。放置中はシンクとか壁とかをクレンザーで掃除。フィルターのほうは熱湯→洗剤コンボを3回くらい繰り返すと、だいぶ取れたっぽい感じになった。あとは歯ブラシでガシガシ擦ってやることで綺麗になった。流石にもう2度とゴメンなので、換気扇用の使い捨てフィルターを買ってきて貼り付けた。大して料理しないから要らないと思っていたのだが、現実は甘くなかったってコトだ。 掃除しつつ洗濯したり布団を干したりもしていたのだが、掃除が一通り終わってサーバの設定に夢中になってて、ふとベランダを見たら床が濡れている。気が付かないうちに雨が振っていたようで…干しっぱなしの布団はびしょびしょに!!小雨だったのでまだマシだが、これは切ない。羽毛布団なので絞ったりとか乱暴なことをするわけにも行かず、ただいま風呂場で乾燥中。まぁそろそろ冬用の布団に切り替えるころなので、クリーニングに出す時期と言えば時期なのだが。
  </div>
  
</article>

  
  
  <hr/>
  
  <article>
  <header>
    <h2><a href="http://nobu666.com/2006/10/22/413.html">[memo] Gentooインストールメモ</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2006-10-22T20:04:41&#43;09:00">
          Oct 22, 2006
        </time>
      </div>
    </div>
  </header>
  <div>
    特に書くことないほどあっさり終了。LiveCDを焼いてそいつでブートし、デスクトップ画面が出てきたら&rdquo;Gentoo Linux installer&rdquo;をダブルクリックして指示に従っていくだけ。つかパソコンふぉあ障害者ず Gentoo Linux 2006.0(インストール-LiveCD-)を参考に。変えたところはIPアドレスとかその辺のネットワーク設定周りと、ステージを3からにしたのと、CFLAGで-O3にしたぐらい。インストールが終わったら上部のメニューからrebootしてCD抜いて終わり。 pingして外に繋がることを確認したら emerge --sync してから、必要なものをガンガン入れるんだが、その前に /etc/init.d/hdparm start してDMAを有効にしておく。んでいい加減sshで繋いで作業したいので nano -w /etc/ssh/sshd_config で適切にsshを設定。 PermitRootLogin no RSAAuthentication yes PubkeyAuthentication yes AuthorizedKeysFile .ssh/authorized_keys PasswordAuthentication no PermitEmptyPasswords no ChallengeResponseAuthentication no とかそんな感じに。 クライアントで鍵セットを作って、USBメモリでサーバに公開鍵を置く。マウントするのは mkdir /mnt/usbmemory mount -t vfat /dev/sdb1 /mnt/usbmemory で、/mnt/usbmemoryが見えるようになる。後は公開鍵を置いてパーミッション変えればOK。 mkdir ~/.ssh cat /mnt/usbmemory/id_rsa &gt;&gt; ~/.ssh/authorized_keys chmod 700 ~/.ssh chmod 600 ~/.ssh/authorized_keys クライアントからsshで繋いでrootになって、ひたすらemerge -av パッケージ名。入れたパッケージは以下の通り。 管理系:gentoolkit/htop/traceroute/tcpdump デーモン系:apache2/proftpd/mysql/subversion/trac/samba ユーティリティ系:sudo/screen/ftp/zsh/w3m/svk/lv/nkf 言語:python/ruby/jdk/groovy keywordでmaskされてるとか怒られるやつは ACCEPT_KEYWORDS=&quot;~amd64&quot; emerge -av パッケージ名 で入る。色々入れたり消したりしてるうちに依存関係がおかしくなったりしたときは、revdep-rebuildする。特定のライブラリに依存するもの、とかの指定もできる。 あとはapacheやらsambaやらの設定だな。
  </div>
  
</article>

  
  
  <hr/>
  
  <article>
  <header>
    <h2><a href="http://nobu666.com/2006/10/22/412.html">自宅サーバ用のPCを購入したけど初期不良で動かず(3)</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2006-10-22T18:50:08&#43;09:00">
          Oct 22, 2006
        </time>
      </div>
    </div>
  </header>
  <div>
    紆余曲折あったが、結局のところ店員のミスでsocket479用のマザーなのにsocket478のCeleronMを突っ込んだのが原因だったっぽい。なんか面倒なのでベアボーンとCPUを交換することにした。静音に拘っていたけど、実際CPUファンのないタイプであればそんなに五月蠅くはなかろうと言うことで、AC電源のやつも諦め。Gentoo熱が高まっていることもあって、なるべく高速なマシンのほうが良くなってしちゃったので、思い切ってAMD64X2 3800+(65W版)にした。 多少高くついたが、そこは流石におまけしてくれた。動かしてみたらやっぱり静か。全然問題ない感じだ。
  </div>
  
</article>

  
  
  <hr/>
  
  <article>
  <header>
    <h2><a href="http://nobu666.com/2006/10/20/411.html">links for 2006-10-20</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2006-10-20T23:18:41&#43;09:00">
          Oct 20, 2006
        </time>
      </div>
    </div>
  </header>
  <div>
    酒日記 はてな支店 - PlaggerLDR hack が動かなくなってた (tags: plagger livedoor livedoorreader) Ohmsha - Binary Hacks ハッカー秘伝の100選 (tags: books) Onlooker+beta: 無断リンク問題で渦中のYokoさんとチャットで話した。その１ (tags: interview chat netwatch) Onlooker+beta: 無断リンク問題で渦中のYokoさんとチャットで話した。その２ (tags: interview chat netwatch) prototype.js リファレンス (tags: prototype.js javascript reference) My RSS 管理人 ブログ++: Google に頻繁にクロールしてもらうオプション (tags: google seo tips) 404 Blog Not Found:javascript vs perl - オブジェクトのメモリー効率 (tags: javascript perl programming object prototype memory) Metasploit Framework 3.0 Automated Exploitation [Pen-test.jpn.org] (tags: security tools) 写真で分かる，VMware初のパラ・バーチャライゼーション：ITpro
  </div>
  
  <footer>
    <ul class="pager">
      <li class="next"><a href="http://nobu666.com/2006/10/20/411.html">Read more <span aria-hidden="true">&raquo;</span></a></li>
    </ul>
  </footer>
  
</article>

  
  
  <hr/>
  
  <article>
  <header>
    <h2><a href="http://nobu666.com/2006/10/20/410.html">自宅サーバ用のPCを購入したけど初期不良で動かず(2)</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2006-10-20T00:11:26&#43;09:00">
          Oct 20, 2006
        </time>
      </div>
    </div>
  </header>
  <div>
    火曜日くらいには届くはず、と宣っていた角田祖父地図秋葉原店。わざわざ残業しないで早めに帰路についていたのだが、待てど暮らせど荷物は届かず。昨日も来なかったので電話してみると、「あのマザーボードにはCeleronMは載らない。確かにACアダプタは初期不良だったが、無理矢理載せたことでマザーまでイカレたっぽいので一旦全返品するか、マザー交換」とのこと。今調べてみたら普通に「FSB 533 / 400MHz の Pentium / Celeron M に対応」と書いてあるのだが…謎。 まぁ担当者が不在なので、状況について明日必ず電話すると約束させたのでヨシとしよう。別に急ぐもんじゃないし。で、相変わらずOSを決めかねていたのだが、とりあえず会社で暇を見てcoLinuxにGentoo入れてみた。coLinuxでは実際のインストール手順と勝手じゃ多少違うのだが、なんとなく雰囲気はつかめた。こいつは今まで経験したUNIX系OSのどれとも異なるものだな…。設定ファイルも他のディストリとは場所が違ったりしてとまどいがち。/etc/hostname作ったら、/etc/conf.d/hostnameにしろとか怒られたりする。基本的にバイナリのパッケージ管理を行わないのですべてコンパイルするわけだが、コンパイルオプションも細かく指定できて非常に面白い。たが非常に時間がかかる。細かい指定が可能な分、他のディストリのようにデフォルトでどこにインストールされたのかよくわからん、とかいう事態は避けられるし、安定版でも人柱版でも選び放題だ。 とりあえず使えるようになるまでに時間がかかる、ということは会社でちょっと使う分には（たとえばcoLinuxなどで）向いていない。だけど自宅サーバならいくら時間がかかろうが別に問題ないわけで、逆に言えば自宅サーバでGentoo使わないとGentoo使う機会がないような気がしてきた。いや、試してみて自分好みに作っていく感覚が面白かった、ってのもあるんだけど。あとは異常なほどの公式な日本語ドキュメントの充実っぷり。これは凄い。公式サイトに、あれだけ大量で詳細なインストールガイドやらなんやらが載っているディストリは他にないのではなかろうか。 そんなわけで自宅サーバにはGentooを入れようと心を決めつつある。肝心のマシンが来ないので、これからVMwareで予行演習する。ちなみに会社マシンのcoLinuxではDebian Serge。でもUbuntuに変えようかと思い中。Debianは安定版にこだわりがあるっぽいので、俺みたいになるべく新しい版を手軽に入れたいとか言う輩にはあんまり向いてない気がしてきた。
  </div>
  
</article>

  
</div>
<nav class="pagination" role="navigation">

  <hr />


<a class="newer-posts" href="/page/35.html"><span aria-hidden="true">&laquo;</span> Newer Posts</a>

  <span class="page-number">Page 36 of 77</span>

<a class="older-posts" href="/page/37.html">Older Posts <span aria-hidden="true">&raquo;</span></a>

</nav>

  </main>
  <footer class="container global-footer">
    <div class="copyright-note pull-left">
      &copy; nobu666.com
    </div>
    <div class="sns-links hidden-print">
  
  <a href="ogata.nobu@gmail.com">
    <i class="fa fa-envelope"></i>
  </a>
  
  
  <a href="https://twitter.com/nobu666" target="_blank">
    <i class="fa fa-twitter"></i>
  </a>
  
  
  
  
  <a href="https://facebook.com/nobutoshi.ogata" target="_blank">
    <i class="fa fa-facebook"></i>
  </a>
  
  
  <a href="https://github.com/nobu666" target="_blank">
    <i class="fa fa-github"></i>
  </a>
  
  
  
  <a href="https://linkedin.com/in/nobu666" target="_blank">
    <i class="fa fa-linkedin"></i>
  </a>
  
  
</div>

  </footer>

  <script src="http://nobu666.com/js/highlight.pack.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-57485-1', 'auto');
    ga('send', 'pageview');
  </script>
  
  
</body>
</html>


