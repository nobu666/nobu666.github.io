<!DOCTYPE html>
<html lang="ja-JP">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
  <meta property="og:title" content=" Real Beat" />
  
  <meta property="og:site_name" content="Real Beat" />
  <meta property="og:url" content="http://nobu666.com/" />
  
  
  <meta property="og:type" content="website" />
  

  <title>
     Real Beat
  </title>

  <link rel="stylesheet" href="http://nobu666.com/css/bootstrap.min.css" />
  <link rel="stylesheet" href="http://nobu666.com/css/main.css" />
  <link rel="stylesheet" href="http://nobu666.com/css/font-awesome.min.css" />
  <link rel="stylesheet" href="http://nobu666.com/css/github.css" />
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400" type="text/css">
  <link rel="shortcut icon" href="http://nobu666.com/images/favicon.ico" />
  <link rel="apple-touch-icon" href="http://nobu666.com/images/apple-touch-icon.png" />
  
  <link href="http://nobu666.com/.xml" rel="alternate" type="application/rss+xml" title="Real Beat" />
  
</head>
<body>
    <header class="global-header"  style="background-image:url( /images/bg.jpg )">
    <section class="header-text">
      <h1><a href="http://nobu666.com/">Real Beat</a></h1>
      
      <div class="sns-links hidden-print">
  
  <a href="ogata.nobu@gmail.com">
    <i class="fa fa-envelope"></i>
  </a>
  
  
  <a href="https://twitter.com/nobu666" target="_blank">
    <i class="fa fa-twitter"></i>
  </a>
  
  
  
  
  <a href="https://facebook.com/nobutoshi.ogata" target="_blank">
    <i class="fa fa-facebook"></i>
  </a>
  
  
  <a href="https://github.com/nobu666" target="_blank">
    <i class="fa fa-github"></i>
  </a>
  
  
  
  <a href="https://linkedin.com/in/nobu666" target="_blank">
    <i class="fa fa-linkedin"></i>
  </a>
  
  
</div>

      
      
      <a href="http://nobu666.com/.xml" class="btn-header btn-subscribe hidden-xs">
        <i class="fa fa-rss" aria-hidden="true"></i>
        &nbsp;Subscribe
      </a>
      
    </section>
  </header>
  <main class="container">

<div class="article-list">
  
  
  <article>
  <header>
    <h2><a href="http://nobu666.com/2006/10/30/425.html">links for 2006-10-30</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2006-10-30T23:20:31&#43;09:00">
          Oct 30, 2006
        </time>
      </div>
    </div>
  </header>
  <div>
    最速インターフェース研究会 :: Gmailで未読のみ表示を切り替えるGreasemonkeyスクリプト (tags: google gmail greasemonkey) 304 Not Modified: 個人ニュースサイトをPlaggerで見よう＆Plagger役立ちリンク集 (tags: plagger links)
  </div>
  
</article>

  
  
  <hr/>
  
  <article>
  <header>
    <h2><a href="http://nobu666.com/2006/10/30/424.html">[memo] GentooでUPS(APC ES 500)を使う</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2006-10-30T01:29:11&#43;09:00">
          Oct 30, 2006
        </time>
      </div>
    </div>
  </header>
  <div>
    Amazonで\7,000ちょっとという値段だったので、購入したのが届いた。流石に24時間稼働だとUPSがないと怖い。今年の雷で瞬断も多くあったので。付属のPowerCuteはWindowsとMacOS Xと商用Linuxにしか対応していないので自力でどうにかする方法をメモ。 準備と接続、認識確認 emerge apcupsd なにはなくともコレがないと始まらない。とりあえずインストールしたら一旦シャットダウンしてコンセントをUPSにつなぎ変え、付属のUSB通信ケーブルでUPSとサーバを接続して再起動。再起動したらdmesgを見てサーバがES500を認識しているか確認。 usbcore: registered new driver hiddev hiddev0: USB HID v1.10 Device [APC APC ES 500 FW:803.p6.A USB FW:p6] on usb-0000:00:10.2-2 上記のようなメッセージがあれば問題ない。が、 es500 hid device not claimed とか出てたら認識していない。俺の場合は思い切り認識していなかった。要するにまたカーネル再構築。だがもう手慣れたモンなのでサクサクと再構築する。こういうときはマシンパワーがあると非常に楽だ。お約束の以下の呪文を唱える。 cd /usr/src/linux make menuconfig そして今の設定をLOADして、以下のところにチェックを付けて保存。 Device Drivers ---&gt; USB Support ---&gt; /dev/hiddev raw HID device support またお約束の呪文。 make &amp;&amp; make modules_install cp arch/x86_64/boot/bzImage /boot/なんか適当な名前 そしたら/boot/grub/grub.confを編集して再起動すればいい。今度はちゃんと認識されているはず。念のためapcaccess statusとやってエラーが出ないことを確認する。 設定と動作確認 次はapcupsdの設定を行う。 cat /etc/apcupsd/apcupsd.conf UPSCABLE usb UPSTYPE usb DEVICE LOCKFILE /var/lock ONBATTERYDELAY
  </div>
  
  <footer>
    <ul class="pager">
      <li class="next"><a href="http://nobu666.com/2006/10/30/424.html">Read more <span aria-hidden="true">&raquo;</span></a></li>
    </ul>
  </footer>
  
</article>

  
  
  <hr/>
  
  <article>
  <header>
    <h2><a href="http://nobu666.com/2006/10/29/423.html">[修正版][memo] postfix &#43; dovecotでSMTP AUTH &amp; IMAPなメールサーバを立ち上げる</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2006-10-29T17:42:48&#43;09:00">
          Oct 29, 2006
        </time>
      </div>
    </div>
  </header>
  <div>
    [memo] postfix + dovecotでSMTP AUTH &amp; IMAPなメールサーバを立ち上げるがあまり正しくないので修正版。 ssmtpの削除 Gentooではいきなりpostfixを入れようとしても、デフォルトでssmtpが入っていてblockされるのでssmtpを消すのが先決。 emerge -C ssmtp postfixとdovecotのインストール Gentooの基本だけど、emergeするときはemerge -pvでどんなフラグが有効になるか必ず確認。必要ないならpackage.useで外す。あとsaslが必要なのでこれは付けておく。あとなんでかわからないけどpostfixにsaslを付けるとついてくるcyrus-saslで、gdbmやcryptをUSEするとコンパイルに失敗したので外した。 emerge -pv postfix dovecot echo &quot;mmail-mta/postfix -mysql sasl&quot; &gt;&gt; /etc/portage/package.use echo &quot;dev-libs/cyrus-sasl -mysql -java -gdbm -crypt&quot; &gt;&gt; /etc/portage/package.use emerge postfix dovecot オレオレ認証局の作成 Gentooでの方法なので他のディストリではパスが違うようなので注意。 mkdir /etc/certs chmod 700 /etc/certs cd /etc/certs cp /etc/ssl/misc/CA.pl . perl ./CA.pl -newca CA certificate filename (or enter to create) (ENTER) Making CA certificate ... Generating a 1024 bit RSA private key ..................................++++++ .......................++++++ writing new private key to './demoCA/private/cakey.pem' Enter PEM pass phrase:(パスフレーズを入力) Verifying - Enter PEM pass phrase:(同じパスフレーズをもう一度入力) ----- You are about to be asked to enter information that will be incorporated into your certificate request.
  </div>
  
  <footer>
    <ul class="pager">
      <li class="next"><a href="http://nobu666.com/2006/10/29/423.html">Read more <span aria-hidden="true">&raquo;</span></a></li>
    </ul>
  </footer>
  
</article>

  
  
  <hr/>
  
  <article>
  <header>
    <h2><a href="http://nobu666.com/2006/10/28/422.html">links for 2006-10-28</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2006-10-28T23:18:21&#43;09:00">
          Oct 28, 2006
        </time>
      </div>
    </div>
  </header>
  <div>
    404 Blog Not Found:Bookmarklet - URI Escape (tags: javascript bookmarklet encode) maruの研究記録 - Mouseover Dictionary (tags: firefox dictionary extention) Clouder::Blogger: mod_loadaverage_redirect (tags: apache module) JSAN - JSONScriptRequest 0.02 (tags: javascript library json jsonp) subtechグループ - ピンク ブロッサム ダイアリー - テストの話 (tags: test tdd) CDJournal.com - ニュース - ディオを含むブラック・サバスが復活！ ただし名義は…… (tags: metal cd group music) 朝顔日記 - Firefox 1.5 から 2.0 へ移行した際に役に立つかもしれない設定とか (tags: firefox 2.0 custom browser) Going My Way: Firefox2.0のリリースで利用できるおすすめエクステンション、追加検索エンジンリスト
  </div>
  
  <footer>
    <ul class="pager">
      <li class="next"><a href="http://nobu666.com/2006/10/28/422.html">Read more <span aria-hidden="true">&raquo;</span></a></li>
    </ul>
  </footer>
  
</article>

  
  
  <hr/>
  
  <article>
  <header>
    <h2><a href="http://nobu666.com/2006/10/28/421.html">[memo] iptablesが使えないのでkernel再構築 &amp; sshdへのアタックをどうにかする</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2006-10-28T04:12:00&#43;09:00">
          Oct 28, 2006
        </time>
      </div>
    </div>
  </header>
  <div>
    なんつーかね、某krからのsshdへのBrute force attacksが酷すぎる。auth.logを埋め尽くすほどのアタックを食らったので対策することに。だが普通にインストールするとiptablesが動いてくれないので、カーネル再構築に挑戦する。 別に今回はkernelのバージョンを上げたいわけではなく、単純にカーネルのオプションを変えたいだけなので、emerge gentoo-sourcesはやらない。以下、rootになって作業を行う。あとmenuconfigはscreenの中でやると表示が乱れて酷いことになるので、screenをデタッチするなり抜けるなりしてからやったほうがいい。 cd /usr/src/linux make menuconfig Confgurationが立ち上がったら、まずLoad an Alternate Configuration Fileを選ぶ。&rdquo;.config&rdquo;が入力されているはずなので、そのままOKすると現在の設定が読み込まれる。そしたら Networking --- Networking options --- Network packet filtering (replaces ipchains) --- Core Netfilter Configuration --- Netfilter Xtables support (required for ip_tables) を選択。その下に色々あるが、よくわからないならMにしといてあとでModuleとして読めるようにしておくと吉。必要なのに何もチェックしないでおくと、再度カーネル再構築が必要になって面倒なので。チェックしたら1つ戻ってIP: Netfilter Configurationの中に入る。とりあえず必須なのはIP tables support (required for filtering/masq/NAT)と、IP range match support、Packet filtering、REJECT target support、address type match support、Full NAT、MASQUERADE target supportとかそのへん。終わったらTOPまで戻って、念のため設定ファイルをなんか名前付けて保存しておいたほうがいい。 あとはその辺のサイトに書いてあるとおり、お約束でOK。 make &amp;&amp; make modules_install cp arch/x86_64/boot/bzImage /boot/なんか適当な名前 vi /boot/grub/grub.conf grub.confの設定では、元々書いてあるものを絶対に消さないこと。消しちゃうと万が一再構築したカーネルで起動できなかったときに面倒。 [sourecode lang=&ldquo;text&rdquo;] title=Gentoo Linux 2.6.17-r8 root (hd0,0) kernel /さっきbootの下にcpしたファイル名 root=/dev/sda3 vga=ask とかで問題なし。vga=askの部分はまぁお好みで。/usr/src/linux/Documentation/fb/vesafb.txtとかを参考に。基本的にはこれでrebootして、上のtitleでつけた名前を選択して起動してやればとりあえずOKなはずだ。失敗したら残しておいた方で起動して修正すべし。消してしまったお馬鹿さんはinstall cdから起動して/dev/sda1とかをmountして編集すれば戻せる。あとvgaとかvideoのオプションは、間違うと画面に何も表示されなくなるので注意。まぁリモート操作がメインならそれでもいいのかも知れないけど、何かあったときにアレなんで…心配ならaskにしておいて選択するのが間違いない。 そこまで出来たらDebian GNU/Linux 3.1(sarge)運用ノートの&lt;a href=&quot;http://www.musicae.ath.cx/diary/?200506c&amp;to=200506272#200506272&quot; target=&quot;_blank&quot;&gt;SSH Brute force attacks&lt;/a&gt;の通りに設定してから ```bash /etc/init.d/iptables save /etc/init.d/iptables start rc-update add iptables default 以上で終了。エラーが出てiptablesが動かない場合は必要なモジュールが選択漏れでコンパイルされていないとか、Mを選択したのにmodprobeなりinsmodしてない。てか俺もこの手順にたどり着くまで5回くらい再構築してこんな時間に…もう寝る!
  </div>
  
</article>

  
  
  <hr/>
  
  <article>
  <header>
    <h2><a href="http://nobu666.com/2006/10/25/420.html">[memo] postfix &#43; dovecotでSMTP AUTH &amp; IMAPなメールサーバを立ち上げる</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2006-10-25T23:59:30&#43;09:00">
          Oct 25, 2006
        </time>
      </div>
    </div>
  </header>
  <div>
    2006/10/29追記: イマイチ不正確なので[修正版][memo] postfix + dovecotでSMTP AUTH &amp; IMAPなメールサーバを立ち上げるで書き直しました。そちらをみてください。
  </div>
  
</article>

  
  
  <hr/>
  
  <article>
  <header>
    <h2><a href="http://nobu666.com/2006/10/24/418.html">[memo] サーバのCPU動作周波数を動的に変える</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2006-10-24T15:50:23&#43;09:00">
          Oct 24, 2006
        </time>
      </div>
    </div>
  </header>
  <div>
    [memo] サーバのCPU動作周波数を下げるの続き。 やってみないとわからんので、cpufreq_ondemandを試してみる。 modprobe cpufreq_ondemand echo ondemand &gt; /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor cd /sys/devices/system/cpu/cpu0/cpufreq/ondemand/ ls ignore_nice_load sampling_down_factor sampling_rate sampling_rate_max sampling_rate_min up_threshold cat ignore_nice_load 0 cat sampling_down_factor 1 cat sampling_rate 1040000 cat sampling_rate_max 520000000 cat sampling_rate_min 520000 cat up_threshold 80 詳細はKernel メモ ondemand参照。とりあえずignore_nice_loadは1に設定しておいた。急がないけど負荷になりそうな作業なんかはniceすること。 実際にemerge &ndash;syncとかして/proc/cpuinfoを見てたら、普段1GHzで動作しているのが2GHz→1.8GHzとなって1GHzに戻った。上手く動いているっぽい。試しにnice revdep-rebuildとかすると1GHzから変わらないことも確認。とりあえずこのまま運用してみる。
  </div>
  
</article>

  
  
  <hr/>
  
  <article>
  <header>
    <h2><a href="http://nobu666.com/2006/10/24/417.html">[memo] TortoiseSVNからsvn&#43;sshを使う</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2006-10-24T15:36:27&#43;09:00">
          Oct 24, 2006
        </time>
      </div>
    </div>
  </header>
  <div>
    普通にsshで繋がるようになったらsvn+sshを使いたくなる。サーバー側はemerge subversionするぐらいで設定は特にない。svnadmin create /var/svn/hoge とか svn import ~/moge file:///var/svn/hogeとかしておくだけ。svnserveを立ち上げる必要はない。svn+sshで接続するときは、sshで認証した後svnserve -tを勝手にしてくれ、接続を切るとsvnserveプロセスもなくなってくれる。よってルータで3690番のポートを開けておくとかいう作業は必要ない。22番だけ開いていればいい。 クライアント側は、Poderosaで作った鍵(例えばファイル名をid_rsaとする)しかない場合はPuTTY用の鍵を作る。puttygenを起動して、秘密鍵を読み込んでパスフレーズを入力すれば変換される。変換された秘密鍵をid_rsa.ppkとして保存。とりあえずPuTTYを起動して接続-データで自動ログインのユーザ名と、接続-SSH-認証で認証のためのプライベートキーファイルでさっきの.ppkファイルを設定。接続してみてパスフレーズ入力してログイン出来ればOK。 次にputty.exeと同じフォルダにあるpageant.exeを起動する。タスクトレイに常駐するので右クリックして鍵の追加を選んで、.ppkを選択する。パスフレーズを入力すれば作業終わり。以降、PuTTYでもTortoiseSVNでもパスフレーズは入力しないでもいい。ただ、これはWindowsにログインしなおすと消えてしまうので、ログイン毎に鍵の追加→パスフレーズの入力を行う必要がある。ランチャーに登録するかスタートアップに入れておく。 後はTortoiseSVNの設定で、ネットワークにあるSSHクライアントにTortoisePlink.exeを設定。これでTortoiseSVNからリボジトリブラウザを開いて、URL欄に svn+ssh://ユーザ名@ホスト名/var/svn/hoge と入力してエラーが出なければ終了。
  </div>
  
</article>

  
  
  <hr/>
  
  <article>
  <header>
    <h2><a href="http://nobu666.com/2006/10/24/416.html">[memo] USEフラグをいい感じに管理する</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2006-10-24T02:40:03&#43;09:00">
          Oct 24, 2006
        </time>
      </div>
    </div>
  </header>
  <div>
    俺のようにしょっちゅうemergeしたい人はUSEフラグの管理が大変だ。知らないうちに勝手にgtk2フラグが有効になっててXがインストールされたりして大変ウザイ。そんなわけでGentoo使いの先輩に教えて貰ったeixとeuseを使ってみる。 sudo emerge eix sudo eix-sync euseはgentoolkitに入っている。eixはemerge &ndash;searchと似たようなモンだがこっちのほうが速いし使いやすい。んで、本題のeuseだが、使い方自体は&ndash;helpすりゃわかるんだが。フラグの説明見たり、どれが使われてるか見れたり、フラグを有効にしたり無効にしたりできる。つーか詳細はman euseで（ｗ euse使うとmake.confのUSEフラグの部分が整形されて見やすくなるのも嬉しい。まぁ説明見るだけなら /usr/portage/profiles/use.desc 見ればいいんだが。 同じくgentoolkitに含まれているequeryも激しく便利。こいつで equery depends mysql とかやってやればmysqlフラグに依存しているパッケージを調べることが出来るし、dependsをdepgraphに変えてやると依存関係をツリーで見れる。超便利。
  </div>
  
</article>

  
  
  <hr/>
  
  <article>
  <header>
    <h2><a href="http://nobu666.com/2006/10/23/415.html">[memo] サーバのCPU動作周波数を下げる</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2006-10-23T23:59:04&#43;09:00">
          Oct 23, 2006
        </time>
      </div>
    </div>
  </header>
  <div>
    CPUに関する情報は/sys/devices/system/cpu/cpu0/cpufreq/で次のファイルをcatする。まぁファイル名のまんまだが。 affected_cpus : 影響する他のCPU。俺の場合はデュアルコアなので当然0と1 cpuinfo_cur_freq : 現在の動作周波数 cpuinfo_max_freq : 最大周波数。AMD64X2 3800+の場合は2000000 cpuinfo_min_freq : 最低周波数。AMD64X2 3800+の場合は1000000 scaling_available_freqyencies : 設定可能な周波数。AMD64X2 3800+の場合は2000000/1800000/1000000しかない。intelだともっと多いらしい scaling_available_governors : 設定可能な動作モード。Gentooのデフォルトではperformanceのみ scaling_cur_freq : 現在の動作周波数 scaling_driver : 周波数コントロールのための仕組みの名前 scaling_governor : 動作モード。scaling_available_governorsのどれか scaling_max_freq : cpuinfo_max_freqと何が違うのかわからん scaling_min_freq : cpuinfo_min_freqと何が違うのかわからん 普段は高周波数で動いてくれなくていいというか、その方が電気代が安くなって地球に優しいためいい感じ。そんなわけで以下の手順を踏んで周波数を下げてみた。 (今の周波数を確認) cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_cur_freq (どんなdriverがあるか探す) find /lib/modules/2.6.17-gentoo-r7/ -name '*.ko'|grep cpu (明らかにそれっぽい奴を見つけたので読み込む) sudo modprobe cpufreq_powersave (動作モードが増えたことを確認) cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_available_governors (動作モードを上で確認したやつに変更) su - ; echo &quot;powersave&quot; &gt; /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor exit (周波数が下がったことを確認) cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_cur_freq これだと確かに周波数は下がるが下がりっぱなしだ。Gentooだと最新を追っかけたい人はコンパイルをしょっちゅうするので、そういうときにいちいち戻すのが面倒だ。そこでcpufreq_ondeamndというdriverを使うと、なんかいい感じに自動化できそうな予感がする。が、もうちょっと調べて、しっかり設定しないと下がりっぱなしとか上がりっぱなしになりそうな予感がするのでとりあえずスルー。
  </div>
  
</article>

  
</div>
<nav class="pagination" role="navigation">

  <hr />


<a class="newer-posts" href="/page/35.html"><span aria-hidden="true">&laquo;</span> Newer Posts</a>

  <span class="page-number">Page 36 of 78</span>

<a class="older-posts" href="/page/37.html">Older Posts <span aria-hidden="true">&raquo;</span></a>

</nav>

  </main>
  <footer class="container global-footer">
    <div class="copyright-note pull-left">
      &copy; nobu666.com
    </div>
    <div class="sns-links hidden-print">
  
  <a href="ogata.nobu@gmail.com">
    <i class="fa fa-envelope"></i>
  </a>
  
  
  <a href="https://twitter.com/nobu666" target="_blank">
    <i class="fa fa-twitter"></i>
  </a>
  
  
  
  
  <a href="https://facebook.com/nobutoshi.ogata" target="_blank">
    <i class="fa fa-facebook"></i>
  </a>
  
  
  <a href="https://github.com/nobu666" target="_blank">
    <i class="fa fa-github"></i>
  </a>
  
  
  
  <a href="https://linkedin.com/in/nobu666" target="_blank">
    <i class="fa fa-linkedin"></i>
  </a>
  
  
</div>

  </footer>

  <script src="http://nobu666.com/js/highlight.pack.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-57485-1', 'auto');
    ga('send', 'pageview');
  </script>
  
  
</body>
</html>


