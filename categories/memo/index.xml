<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Memo on Real Beat</title>
    <link>http://localhost:1313/categories/memo.html</link>
    <description>Recent content in Memo on Real Beat</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja</language>
    <lastBuildDate>Wed, 11 Mar 2009 17:33:44 +0900</lastBuildDate>
    <atom:link href="http://localhost:1313/categories/memo.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>manを実行すると &#34;WARNING: old character encoding and/or character set&#34; とエラーを吐く時の対処</title>
      <link>http://localhost:1313/2009/03/11/0756.html</link>
      <pubDate>Wed, 11 Mar 2009 17:33:44 +0900</pubDate>
      
      <guid>http://localhost:1313/2009/03/11/0756.html</guid>
      <description>&lt;p&gt;manを実行すると以下のようなエラーになることがある。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;XXX
XXX WARNING: old character encoding and/or character set
XXX 
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;いろいろ調べた結果、libiconvが悪さしていた。/usr/bin/iconvではなく、/usr/local/bin/iconvを見に行っていたのが原因だった。/usr/local/bin/iconvのファイル名を変更したら治った。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Scala 2.7.0-final</title>
      <link>http://localhost:1313/2008/03/07/0576.html</link>
      <pubDate>Fri, 07 Mar 2008 14:12:47 +0900</pubDate>
      
      <guid>http://localhost:1313/2008/03/07/0576.html</guid>
      <description>&lt;p&gt;&lt;a href=&#34;http://www.scala-lang.org/downloads/changes.html#v2.7.0-final&#34;&gt;Scala 2.7.0-final&lt;/a&gt;きてた。あとで入れる。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>wordpressのformatterがキモいタグを生成するので、どうにかする - v2.3.3の場合</title>
      <link>http://localhost:1313/2008/02/28/0568.html</link>
      <pubDate>Thu, 28 Feb 2008 16:45:05 +0900</pubDate>
      
      <guid>http://localhost:1313/2008/02/28/0568.html</guid>
      <description>&lt;p&gt;前回の&lt;a href=&#34;http://nobu666.com/2008/02/22/562.html&#34;&gt;wordpressのformatterがキモいタグを生成するので、どうにかする&lt;/a&gt;はME2.2.3以外でpatchすると、管理画面で激しくwarningが出てエライことになる。ので、v2.3.3用のpatch。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;--- www/wp-includes/formatting.php.orig Thu Feb 28 16:37:29 2008
+++ www/wp-includes/formatting.php      Thu Feb 28 16:39:27 2008
@@ -63,7 +63,7 @@
        $pee = $pee . &amp;amp;quot;\n&amp;amp;quot;; // just to make things a little easier, pad the end
        $pee = preg_replace(&#39;|&amp;amp;lt;br /&amp;amp;gt;\s*&amp;amp;lt;br /&amp;amp;gt;|&#39;, &amp;amp;quot;\n\n&amp;amp;quot;, $pee);
        // Space things out a little
-        $allblocks = &#39;(?:table|thead|tfoot|caption|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|form|map|area|blockquote|address|math|style|input|p|h[1-6]|hr)&#39;;
+       $allblocks = &#39;(?:code|table|thead|tfoot|caption|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|form|map|area|blockquote|address|math|style|input|p|h[1-6]|hr)&#39;;
        $pee = preg_replace(&#39;!(&amp;amp;lt;&#39; . $allblocks . &#39;[^&amp;amp;gt;]*&amp;amp;gt;)!&#39;, &amp;amp;quot;\n$1&amp;amp;quot;, $pee);
        $pee = preg_replace(&#39;!(&amp;amp;lt;/&#39; . $allblocks . &#39;&amp;amp;gt;)!&#39;, &amp;amp;quot;$1\n\n&amp;amp;quot;, $pee);
        $pee = str_replace(array(&amp;amp;quot;\r\n&amp;amp;quot;, &amp;amp;quot;\r&amp;amp;quot;), &amp;amp;quot;\n&amp;amp;quot;, $pee); // cross-platform newlines
@@ -88,6 +88,10 @@
        if (strpos($pee, &#39;&amp;amp;lt;pre&#39;) !== false)
                $pee = preg_replace_callback(&#39;!(&amp;amp;lt;pre.*?&amp;amp;gt;)(.*?)&amp;amp;lt;/pre&amp;amp;gt;!is&#39;, &#39;clean_pre&#39;, $pee );
        $pee = preg_replace( &amp;amp;quot;|\n&amp;amp;lt;/p&amp;amp;gt;$|&amp;amp;quot;, &#39;&amp;amp;lt;/p&amp;amp;gt;&#39;, $pee );
+        $pee = preg_replace(&#39;| {4}|&#39;, str_repeat(&#39; &#39;,4), $pee);
+        $pee = str_replace(&#39;\\&#39;, &#39;\\\\&#39;, $pee);
+        $pee = preg_replace(&#39;|&amp;amp;lt;code&amp;amp;gt;.*?&amp;amp;lt;/code&amp;amp;gt;|se&#39;, &amp;amp;quot;str_replace(array(&#39;&amp;amp;lt;p&amp;amp;gt;&#39;, &#39;&amp;amp;lt;/p&amp;amp;gt;&#39;), array(&#39;&#39;, &#39;&amp;amp;lt;br /&amp;amp;gt;&amp;amp;lt;br /&amp;amp;gt;&#39;), &#39;$0&#39;)&amp;amp;quot;, $pee);
+        $pee = StripSlashes($pee);

        return $pee;
 }
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>wordpressのformatterがキモいタグを生成するので、どうにかする - ME2.2.3の場合</title>
      <link>http://localhost:1313/2008/02/22/0562.html</link>
      <pubDate>Fri, 22 Feb 2008 18:36:22 +0900</pubDate>
      
      <guid>http://localhost:1313/2008/02/22/0562.html</guid>
      <description>&lt;p&gt;&amp;lt;p&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/p&amp;gt;とかいう謎タグが生成されて激しく気持ち悪いので、phpに手を入れる。&lt;a href=&#34;http://spring.sakurasaita.net/wordpress/25.html&#34;&gt;As You Like It ? Blog Archive ? WordPressのエディタとの付き合い方&lt;/a&gt;を参照して、その通りに書き換えるだけ。patchにしとく。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;--- formatting.php.org  Fri Feb 22 18:23:52 2008
+++ formatting.php      Fri Feb 22 18:21:16 2008
@@ -55,7 +55,7 @@
        $pee = $pee . &amp;amp;quot;\n&amp;amp;quot;; // just to make things a little easier, pad the end
        $pee = preg_replace(&#39;|&amp;amp;lt;br /&amp;amp;gt;\s*&amp;amp;lt;br /&amp;amp;gt;|&#39;, &amp;amp;quot;\n\n&amp;amp;quot;, $pee);
        // Space things out a little
-       $allblocks = &#39;(?:table|thead|tfoot|caption|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|form|map|area|blockquote|address|math|style|input|p|h[1-6]|hr)&#39;;
+       $allblocks = &#39;(?:code|table|thead|tfoot|caption|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|form|map|area|blockquote|address|math|style|input|p|h[1-6]|hr)&#39;;
        $pee = preg_replace(&#39;!(&amp;amp;lt;&#39; . $allblocks . &#39;[^&amp;amp;gt;]*&amp;amp;gt;)!&#39;, &amp;amp;quot;\n$1&amp;amp;quot;, $pee);
        $pee = preg_replace(&#39;!(&amp;amp;lt;/&#39; . $allblocks . &#39;&amp;amp;gt;)!&#39;, &amp;amp;quot;$1\n\n&amp;amp;quot;, $pee);
        $pee = str_replace(array(&amp;amp;quot;\r\n&amp;amp;quot;, &amp;amp;quot;\r&amp;amp;quot;), &amp;amp;quot;\n&amp;amp;quot;, $pee); // cross-platform newlines
@@ -80,6 +80,13 @@
        if (strpos($pee, &#39;&amp;amp;lt;pre&#39;) !== false)
                $pee = preg_replace(&#39;!(&amp;amp;lt;pre.*?&amp;amp;gt;)(.*?)&amp;amp;lt;/pre&amp;amp;gt;!ise&#39;, &amp;amp;quot; stripslashes(&#39;$1&#39;) .  stripslashes(clean_pre(&#39;$2&#39;))  . &#39;&amp;amp;lt;/pre&amp;amp;gt;&#39; &amp;amp;quot;, $pee);
        $pee = preg_replace( &amp;amp;quot;|\n&amp;amp;lt;/p&amp;amp;gt;$|&amp;amp;quot;, &#39;&amp;amp;lt;/p&amp;amp;gt;&#39;, $pee );
+        $pee = preg_replace(&#39;| {4}|&#39;, str_repeat(&#39;&amp;amp;amp;amp;nbsp;&#39;,4), $pee);
+        $pee = str_replace(&#39;\\&#39;, &#39;\\\\&#39;, $pee);
+        $pee = preg_replace(
+            &#39;|&amp;amp;lt;code&amp;amp;gt;.*?&amp;amp;lt;/code&amp;amp;gt;|se&#39;
+            , &amp;amp;quot;str_replace(array(&#39;&amp;amp;lt;p&amp;amp;gt;&#39;, &#39;&amp;amp;lt;/p&amp;amp;gt;&#39;), array(&#39;&#39;, &#39;&amp;amp;lt;br /&amp;amp;gt;&amp;amp;lt;br /&amp;amp;gt;&#39;), &#39;$0&#39;)&amp;amp;quot;
+            , $pee);
+        $pee = StripSlashes($pee);

        return $pee;
 }
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>見た目と文字コード変えた</title>
      <link>http://localhost:1313/2008/02/21/0560.html</link>
      <pubDate>Thu, 21 Feb 2008 23:35:35 +0900</pubDate>
      
      <guid>http://localhost:1313/2008/02/21/0560.html</guid>
      <description>&lt;p&gt;そろそろ見てくれを変えてやろうと思って、そのついでにwordpressのバージョンアップ＋文字コードの変更。今時eucってのもあれなんで、ついでにutf-8化。&lt;/p&gt;
&lt;code&gt;mysqldump -uroot -p -hHOST -q DATABASE &amp;gt; ./dumped.sql
nkf -w --overwrite ./dumped.sql
mysql -uroot -p -hHOST DATABASE &amp;lt; ./dumped.sql&lt;/code&gt;
&lt;p&gt;こんだけかと思いきや、権限周りが壊れてログイン不能になったので&lt;a href=&#34;http://wordpress-guide.com/2006/11/11/capabilities/&#34;&gt;「WordPress標準ガイドブック」サポートサイト ? capabilities.phpのエラーが表示された場合&lt;/a&gt; を参照してパッチを当てる。&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>